++++++++++++++++++++++++++++++
Statistics on the Python C API
++++++++++++++++++++++++++++++

Line Numbers
============

Number of C API line numbers per Python version:

======  =============  ===========  ============  ======
Python  Limited API    CPython API  Internal API  Total
======  =============  ===========  ============  ======
2.7     12,686 (100%)  0 (0%)       0 (0%)        12,686
3.6     16,011 (100%)  0 (0%)       0 (0%)        16,011
3.7     16,517 (96%)   0 (0%)       772 (4%)      17,289
3.8     13,166 (70%)   3,417 (18%)  2,295 (12%)   18,878
3.9     12,265 (62%)   4,358 (22%)  3,146 (16%)   19,769
3.10    10,396 (51%)   4,616 (22%)  5,572 (27%)   20,584
3.11    9,235 (37%)    5,499 (22%)  10,047 (41%)  24,781
3.12    9,598 (29%)    5,903 (18%)  17,630 (53%)  33,131
3.13    9,417 (28%)    5,786 (17%)  17,889 (54%)  33,092
======  =============  ===========  ============  ======

File Numbers
============

Number of header file numbers per Python version:

======  ===========  ===========  ============  =========
Python  Limited API  CPython API  Internal API  Total
======  ===========  ===========  ============  =========
2.7     91           0            0             91
3.6     99 (+8)      0 (same)     0 (same)      99 (+8)
3.7     99 (same)    0 (same)     12 (+12)      111 (+12)
3.8     97 (-2)      15 (+15)     22 (+10)      134 (+23)
3.9     98 (+1)      24 (+9)      34 (+12)      156 (+22)
3.10    81 (-17)     32 (+8)      48 (+14)      161 (+5)
3.11    72 (-9)      48 (+16)     68 (+20)      188 (+27)
3.12    72 (same)    49 (+1)      91 (+23)      212 (+24)
3.13    73 (+1)      51 (+2)      93 (+2)       217 (+5)
======  ===========  ===========  ============  =========

Functions
=========

Functions exported with PyAPI_FUNC():

======  ==========  ==========  =========  ============
Python  Public      Private     Internal   Total
======  ==========  ==========  =========  ============
2.7     748         178         0          926
3.6     848 (+100)  392 (+214)  0 (same)   1,240 (+314)
3.7     872 (+24)   458 (+66)   13 (+13)   1,343 (+103)
3.8     910 (+38)   429 (-29)   79 (+66)   1,418 (+75)
3.9     920 (+10)   414 (-15)   109 (+30)  1,443 (+25)
3.10    885 (-35)   415 (+1)    115 (+6)   1,415 (-28)
3.11    914 (+29)   361 (-54)   176 (+61)  1,451 (+36)
3.12    951 (+37)   385 (+24)   177 (+1)   1,513 (+62)
3.13    935 (-16)   357 (-28)   173 (-4)   1,465 (-48)
======  ==========  ==========  =========  ============

Since Python 3.9, Python is now built with ``-fvisibility=hidden`` to avoid
exporting symbols which are not **explicitly** exported.

The ``make smelly`` command checks for public symbols of libpython and C
extension which are prefixed by ``Py`` or ``_Py``. See
the ``Tools/scripts/smelly.py`` script.

Variables
=========

Symbols exported with PyAPI_DATA():

======  ==========  =========  =========  ==========
Python  Public      Private    Internal   Total
======  ==========  =========  =========  ==========
2.7     130         32         0          162
3.6     166 (+36)   42 (+10)   0 (same)   208 (+46)
3.7     170 (+4)    35 (-7)    9 (+9)     214 (+6)
3.8     174 (+4)    37 (+2)    12 (+3)    223 (+9)
3.9     173 (-1)    35 (-2)    14 (+2)    222 (-1)
3.10    173 (same)  35 (same)  13 (-1)    221 (-1)
3.11    177 (+4)    32 (-3)    10 (-3)    219 (-2)
3.12    178 (+1)    29 (-3)    12 (+2)    219 (same)
3.13    178 (same)  30 (+1)    12 (same)  220 (+1)
======  ==========  =========  =========  ==========

Functions defined as macros and static inline functions
=======================================================

Functions defined as macros (only public) and static inline functions (public or private):

======  ==========  =============  =========
Python  Macro       Static inline  Total
======  ==========  =============  =========
2.7     276         0              276
3.6     306 (+30)   0 (same)       306 (+30)
3.7     315 (+9)    0 (same)       315 (+9)
3.8     314 (-1)    7 (+7)         321 (+6)
3.9     307 (-7)    11 (+4)        318 (-3)
3.10    307 (same)  18 (+7)        325 (+7)
3.11    269 (-38)   46 (+28)       315 (-10)
3.12    251 (-18)   71 (+25)       322 (+7)
3.13    247 (-4)    70 (-1)        317 (-5)
======  ==========  =============  =========

Structures
==========

Structures in the Python C API:

======  ===========  ===========  ============  =========
Python  Limited API  CPython API  Internal API  Total
======  ===========  ===========  ============  =========
2.7     92           0            0             92
3.6     110 (+18)    0 (same)     0 (same)      110 (+18)
3.7     114 (+4)     0 (same)     18 (+18)      132 (+22)
3.8     81 (-33)     34 (+34)     28 (+10)      143 (+11)
3.9     68 (-13)     46 (+12)     38 (+10)      152 (+9)
3.10    41 (-27)     53 (+7)      91 (+53)      185 (+33)
3.11    19 (-22)     75 (+22)     112 (+21)     206 (+21)
3.12    18 (-1)      84 (+9)      170 (+58)     272 (+66)
3.13    18 (same)    88 (+4)      171 (+1)      277 (+5)
======  ===========  ===========  ============  =========

Count also private structures like "_PyCFrame" and structures with names not starting with Py like "_frozen".

